<script lang="ts">
import type { Editor } from "$lib/editor";
import { setContext } from "svelte";
import KanaButton from "./KanaButton.svelte";
import FloatDialog from "./ui/FloatDialog.svelte";

let { editor, shown = $bindable(false) }: { editor: Editor; shown?: boolean } =
	$props();
setContext("editor", editor);

const KANA_TABLE = [
	["„ÅÇ", ["õÄÇ", "õÄÖ", "õÄÉ", "õÄÑ"]],
	["„ÅÑ", ["õÄÜ", "õÄá", "õÄà", "õÄâ"]],
	["„ÅÜ", ["õÄä", "õÄã", "õÄå", "õÄç", "õÄé"]],
	["„Åà", ["õÄÅ", "õÄè", "õÄê", "õÄë", "õÄí", "õÄì"]],
	["„Åä", ["õÄî", "õÄï", "õÄñ"]],
	[
		"„Åã",
		["õÄó", "õÄò", "õÄô", "õÄö", "õÄõ", "õÄ¢", "õÄú", "õÄù", "õÄû", "õÄü", "õÄ†", "õÄ°"],
	],
	["„Åç", ["õÄ£", "õÄ§", "õÄ•", "õÄ¶", "õÄª", "õÄß", "õÄ®", "õÄ©", "õÄ™"]],
	["„Åè", ["õÄ´", "õÄ¨", "õÄ≠", "õÄÆ", "õÄØ", "õÄ∞", "õÄ±"]],
	["„Åë", ["õÄ≥", "õÄ≤", "õÄ¢", "õÄ¥", "õÄµ", "õÄ∂", "õÄ∑"]],
	["„Åì", ["õÄ∏", "õÇò", "õÄπ", "õÄª", "õÄ∫"]],
	["„Åï", ["õÄº", "õÄΩ", "õÄæ", "õÄø", "õÅÄ", "õÅÅ", "õÅÇ", "õÅÉ"]],
	["„Åó", ["õÅÑ", "õÅÖ", "õÅÜ", "õÅá", "õÅà", "õÅâ"]],
	["„Åô", ["õÅä", "õÅã", "õÅå", "õÅç", "õÅé", "õÅè", "õÅê", "õÅë"]],
	["„Åõ", ["õÅí", "õÅì", "õÅî", "õÅï", "õÅñ"]],
	["„Åù", ["õÅó", "õÅò", "õÅô", "õÅö", "õÅõ", "õÅú", "õÅù"]],
	["„Åü", ["õÅû", "õÅü", "õÅ†", "õÅ°"]],
	["„Å°", ["õÅ¢", "õÅ£", "õÅ§", "õÅ•", "õÅ¶", "õÅß", "õÅ®"]],
	["„Å§", ["õÅ©", "õÅ™", "õÅ´", "õÅ¨", "õÅ≠"]],
	["„Å¶", ["õÅÆ", "õÅØ", "õÅ∞", "õÅ±", "õÅ≤", "õÅ≥", "õÅ¥", "õÅµ", "õÅ∂", "õÇé"]],
	["„Å®", ["õÅ∑", "õÅ∏", "õÅπ", "õÅ∫", "õÅª", "õÅº", "õÅΩ", "õÅ≠"]],
	["„Å™", ["õÅæ", "õÅø", "õÇÄ", "õÇÅ", "õÇÇ", "õÇÉ", "õÇÑ", "õÇÖ", "õÇÜ"]],
	["„Å´", ["õÇá", "õÇà", "õÇâ", "õÇä", "õÇã", "õÇå", "õÇç", "õÇé"]],
	["„Å¨", ["õÇè", "õÇê", "õÇë"]],
	["„Å≠", ["õÇí", "õÇì", "õÇî", "õÇï", "õÇñ", "õÇó", "õÇò"]],
	["„ÅÆ", ["õÇô", "õÇö", "õÇõ", "õÇú", "õÇù"]],
	["„ÅØ", ["õÇû", "õÇü", "õÇ†", "õÇ°", "õÇ¢", "õÇ£", "õÇ§", "õÇ•", "õÇ¶", "õÇß", "õÇ®"]],
	["„Å≤", ["õÇ©", "õÇ™", "õÇ´", "õÇ¨", "õÇ≠", "õÇÆ", "õÇØ"]],
	["„Åµ", ["õÇ∞", "õÇ±", "õÇ≤"]],
	["„Å∏", ["õÇ≥", "õÇ¥", "õÇµ", "õÇ∂", "õÇ∑", "õÇ∏", "õÇπ"]],
	["„Åª", ["õÇ∫", "õÇª", "õÇº", "õÇΩ", "õÇæ", "õÇø", "õÉÄ", "õÉÅ"]],
	["„Åæ", ["õÉÇ", "õÉÉ", "õÉÑ", "õÉÖ", "õÉÜ", "õÉá", "õÉà", "õÉñ"]],
	["„Åø", ["õÉâ", "õÉä", "õÉã", "õÉå", "õÉç", "õÉé", "õÉè"]],
	["„ÇÄ", ["õÉê", "õÉë", "õÉí", "õÉì", "õÑù", "õÑû"]],
	["„ÇÅ", ["õÉî", "õÉï", "õÉñ"]],
	["„ÇÇ", ["õÉó", "õÉò", "õÉô", "õÉö", "õÉõ", "õÉú", "õÑù", "õÑû"]],
	["„ÇÑ", ["õÉù", "õÉû", "õÉü", "õÉ†", "õÉ°", "õÉ¢"]],
	null,
	["„ÇÜ", ["õÉ£", "õÉ§", "õÉ•", "õÉ¶"]],
	null,
	["„Çà", ["õÉß", "õÉ®", "õÉ©", "õÉ™", "õÉ´", "õÉ¨"]],
	["„Çâ", ["õÉ≠", "õÉÆ", "õÉØ", "õÉ∞"]],
	["„Çä", ["õÉ±", "õÉ≤", "õÉ≥", "õÉ¥", "õÉµ", "õÉ∂", "õÉ∑"]],
	["„Çã", ["õÉ∏", "õÉπ", "õÉ∫", "õÉª", "õÉº", "õÉΩ"]],
	["„Çå", ["õÉæ", "õÉø", "õÑÄ", "õÑÅ"]],
	["„Çç", ["õÑÇ", "õÑÉ", "õÑÑ", "õÑÖ", "õÑÜ", "õÑá"]],
	["„Çè", ["õÑà", "õÑâ", "õÑä", "õÑã", "õÑå"]],
	["„Çê", ["õÑç", "õÑé", "õÑè", "õÑê", "õÑë"]],
	null,
	["„Çë", ["õÑí", "õÑì", "õÑî", "õÑï"]],
	["„Çí", ["õÑñ", "õÑó", "õÑò", "õÑô", "õÑö", "õÑõ", "õÑú", "õÄÖ"]],
	["„Çì", ["õÑù", "õÑû"]],
	null,
	null,
	null,
	null,
] as const;

let text = $state(editor.text);

editor.onchange(() => {
	text = editor.text;
});
</script> 

<FloatDialog bind:shown>
	<div class="container">
		<h2>Â§â‰Ωì‰ªÆÂêç</h2>
		<div class="kana-table">
			{#each KANA_TABLE as k}
				{#if k}
					{@const [kana, variants] = k}
				<div class="row">
					<KanaButton display={kana} variants={variants} />
					</div>
				{:else}
					<div class="row"></div>
				{/if}
			{/each}
		</div>
	</div>
</FloatDialog>

<style>
  .kana-table {
		padding: 0.25em;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 0.25em;
  }

	h2 {
		margin: 0;
		border: none;
		font-size: 1.25em;
		font-family: inherit;
		width: 100%;
		text-align: center;
	}

	.container {
		display: flex;
		flex-direction: column;
	}
</style>